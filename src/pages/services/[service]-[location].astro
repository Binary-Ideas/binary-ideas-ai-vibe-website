---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { services } from '../../data/services.js';
import { locations } from '../../data/location.js';

// This function tells Astro to generate a page for every service √ó location combination
export async function getStaticPaths() {
  const paths = [];

  // Loop through every service
  for (const service of services) {
    // Loop through every location
    for (const location of locations) {
      paths.push({
        params: {
          service: service.slug,
          location: location.slug,
        },
        props: {
          service,
          location,
        },
      });
    }
  }

  return paths;
}

const { service, location } = Astro.props;

// Create page title and description with fallback values
const title = `${service.name} in ${location.city}, ${location.state}`;
const description = `${service.shortDescription || service.description} for businesses in ${location.city}, VA. Binary Ideas AI provides ${service.name} services. Call (703) 690-9726.`;

// Create a default location description if not provided
const locationDescription = `Binary Ideas AI provides ${service.name} services to businesses in ${location.city}, Virginia. We serve ${location.city} from our Lorton office (${location.distance}). Whether you're in ${location.neighborhoods?.slice(0, 3).join(', ') || location.city}, we're here to help transform your business with AI automation.`;
---

<BaseLayout title={title} description={description}>
  <div class="bg-white w-full min-h-screen flex flex-col relative overflow-x-hidden">
    <Header />

    <main class="z-[1] w-full flex-1 relative bg-[#0a0a0f] pt-[97px]">
      <!-- Background gradient bubbles -->
      <div class="absolute top-0 left-0 w-full h-[1200px] opacity-50 pointer-events-none">
        <div class="absolute top-0 left-[25%] w-96 h-96">
          <div class="glow-sphere glow-sphere--1 h-full w-full bg-[#2b7fff] rounded-[33554400px] blur-3xl pointer-events-none"></div>
        </div>
        <div class="absolute right-[25%] bottom-0 w-96 h-96">
          <div class="glow-sphere glow-sphere--2 h-full w-full bg-[#ac46ff] rounded-[33554400px] blur-3xl pointer-events-none"></div>
        </div>
        <div class="absolute top-[50%] left-[50%] w-96 h-96 -translate-x-1/2 -translate-y-1/2">
          <div class="glow-sphere glow-sphere--3 h-full w-full bg-[#f6329a] rounded-[33554400px] blur-3xl pointer-events-none"></div>
        </div>
      </div>

      <div class="absolute top-[1200px] left-0 w-full h-[1200px] opacity-40 pointer-events-none">
        <div class="absolute top-10 left-[20%] w-80 h-80">
          <div class="glow-sphere glow-sphere--4 h-full w-full bg-[#ac46ff] rounded-[33554400px] blur-3xl pointer-events-none"></div>
        </div>
        <div class="absolute right-[22%] top-1/2 w-96 h-96">
          <div class="glow-sphere glow-sphere--5 h-full w-full bg-[#2b7fff] rounded-[33554400px] blur-3xl pointer-events-none"></div>
        </div>
        <div class="absolute left-1/2 bottom-10 w-80 h-80 -translate-x-1/2">
          <div class="glow-sphere glow-sphere--6 h-full w-full bg-[#f6329a] rounded-[33554400px] blur-3xl pointer-events-none"></div>
        </div>
      </div>

      <!-- Hero Section -->
      <section class="relative w-full px-4 md:px-8 py-20 md:py-32 flex items-center justify-center bg-[url(/img/mask-group.svg)] bg-cover bg-[50%_50%]">
        <div class="max-w-7xl mx-auto w-full flex flex-col items-center gap-8 text-center relative z-10">
          <!-- Breadcrumb -->
          <nav class="mb-4 [font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-sm text-[#99a1ae]">
            <a href="/" class="hover:text-white transition-colors">Home</a>
            <span class="mx-2">‚Ä∫</span>
            <a href={`/services/${service.slug}`} class="hover:text-white transition-colors">{service.name}</a>
            <span class="mx-2">‚Ä∫</span>
            <span class="text-white">{location.city}, {location.state}</span>
          </nav>

          <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-normal text-center [font-family:'Segoe_UI_Symbol-Regular',Helvetica] px-4">
            <span class="text-white">{service.name} in </span>
            <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">{location.city}, {location.state}</span>
          </h1>

          <p class="text-base md:text-xl lg:text-2xl [font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#99a1ae] text-center leading-relaxed max-w-4xl px-4">
            {service.shortDescription}
          </p>

          <div class="flex flex-wrap items-center justify-center gap-4 text-sm [font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-[#99a1ae]">
            <span>üìç Serving {location.city} from our Lorton office ({location.distance})</span>
            <span>üìû <a href="tel:7036909726" class="text-white hover:text-blue-400 transition-colors">(703) 690-9726</a></span>
          </div>

          <div class="flex flex-col sm:flex-row items-center gap-4 mt-4">
            <a
              href="#get-started"
              class="px-8 py-4 rounded-[10px] overflow-hidden bg-[linear-gradient(90deg,rgba(43,127,255,1)_0%,rgba(152,16,250,1)_100%)] cursor-pointer transition-opacity hover:opacity-90 flex items-center justify-center gap-2"
            >
              <span class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-white text-base tracking-[0] leading-6 whitespace-nowrap">
                Get Started in {location.city}
              </span>
              <img class="w-5 h-5" alt="" src="/img/vector-4.svg" aria-hidden="true" />
            </a>

            <a
              href="tel:7036909726"
              class="px-8 py-4 rounded-[10px] border-2 border-solid border-[#2b7fff80] backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)] flex items-center justify-center gap-2 cursor-pointer transition-all hover:border-[#2b7fff] hover:bg-[#2b7fff1a]"
            >
              <img class="w-5 h-5" alt="" src="/img/vector-21.svg" aria-hidden="true" />
              <span class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-white text-base tracking-[0] leading-6 whitespace-nowrap">
                Call (703) 690-9726
              </span>
            </a>
          </div>
        </div>
      </section>

      <!-- Service Description -->
      <section class="relative w-full px-4 md:px-8 lg:px-20 py-20 md:py-32">
        <div class="max-w-4xl mx-auto relative z-10">
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-normal text-center mb-12 [font-family:'Segoe_UI_Symbol-Regular',Helvetica]">
            <span class="text-white">About </span>
            <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">{service.name}</span>
          </h2>
          <div class="prose prose-invert max-w-none">
            {service.description.split('\n\n').map((paragraph: string) => (
              <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#99a1ae] text-base md:text-lg tracking-[0] leading-relaxed mb-6">
                {paragraph}
              </p>
            ))}
          </div>
        </div>
      </section>

      <!-- Location-Specific Content -->
      <section class="relative w-full px-4 md:px-8 lg:px-20 py-20 md:py-32">
        <div class="max-w-4xl mx-auto relative z-10">
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-normal text-center mb-12 [font-family:'Segoe_UI_Symbol-Regular',Helvetica]">
            <span class="text-white">{service.name} for </span>
            <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">{location.city} Businesses</span>
          </h2>
          <div class="bg-[#fffefe0d] rounded-2xl border-[#fffefe1a] border border-solid backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)] p-8">
            <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#d0d5db] text-base md:text-lg tracking-[0] leading-relaxed mb-6">
              {locationDescription}
            </p>
            {location.industries && (
              <div class="mt-8">
                <h3 class="text-xl md:text-2xl font-normal mb-4 [font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-white">
                  Key Industries in {location.city}
                </h3>
                <div class="flex flex-wrap gap-2">
                  {location.industries.slice(0, 6).map((industry: string) => (
                    <span class="px-4 py-2 rounded-full border-[#2b7fff4c] bg-[linear-gradient(90deg,rgba(43,127,255,0.2)_0%,rgba(173,70,255,0.2)_100%)] border border-solid backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)] [font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#8dc5ff] text-xs tracking-[0] leading-4">
                      {industry}
                    </span>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      </section>

      <!-- Benefits -->
      <section class="relative w-full px-4 md:px-8 lg:px-20 py-20 md:py-32">
        <div class="max-w-7xl mx-auto relative z-10">
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-normal text-center mb-12 [font-family:'Segoe_UI_Symbol-Regular',Helvetica]">
            <span class="text-white">Benefits of {service.name} for </span>
            <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">{location.city} Businesses</span>
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {service.benefits.map((benefit: string) => (
              <div class="bg-[#fffefe0d] rounded-2xl border-[#fffefe1a] border border-solid backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)] p-6 flex items-start gap-4">
                <div class="w-8 h-8 flex items-center justify-center rounded-full bg-[linear-gradient(145deg,rgba(43,127,255,1)_0%,rgba(152,16,250,1)_100%)] flex-shrink-0">
                  <span class="text-white text-lg font-bold">‚úì</span>
                </div>
                <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#d0d5db] text-base tracking-[0] leading-relaxed m-0">
                  {benefit}
                </p>
              </div>
            ))}
          </div>
        </div>
      </section>

      <!-- Use Cases -->
      <section class="relative w-full px-4 md:px-8 lg:px-20 py-20 md:py-32">
        <div class="max-w-4xl mx-auto relative z-10">
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-normal text-center mb-12 [font-family:'Segoe_UI_Symbol-Regular',Helvetica]">
            <span class="text-white">Common Use Cases in </span>
            <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">{location.city}</span>
          </h2>
          <div class="space-y-4">
            {service.useCases.map((useCase: string) => (
              <div class="bg-[#fffefe0d] rounded-2xl border-[#fffefe1a] border border-solid backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)] p-6 flex items-center gap-4">
                <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                  <span class="text-[#2b7fff] text-xl">‚Üí</span>
                </div>
                <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#d0d5db] text-base tracking-[0] leading-relaxed m-0">
                  {useCase}
                </p>
              </div>
            ))}
          </div>
        </div>
      </section>

      <!-- CTA Section -->
      <section id="get-started" class="relative w-full px-4 md:px-8 py-20 md:py-32 bg-[linear-gradient(90deg,rgba(43,127,255,0.1)_0%,rgba(173,70,255,0.1)_50%,rgba(246,51,154,0.1)_100%)]">
        <div class="max-w-4xl mx-auto flex flex-col items-center text-center relative z-10">
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-normal text-center mb-8 [font-family:'Segoe_UI_Symbol-Regular',Helvetica]">
            <span class="text-white">Ready to Get Started in </span>
            <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">{location.city}?</span>
          </h2>

          <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#99a1ae] text-base md:text-lg text-center tracking-[0] leading-relaxed mb-12">
            Join businesses across {location.city} that are already using {service.name} to save time and money.
          </p>

          <div class="flex flex-col sm:flex-row items-center gap-4 mb-12">
            <a
              href="#get-started"
              class="w-full sm:w-auto px-10 py-5 rounded-[10px] overflow-hidden bg-[linear-gradient(90deg,rgba(43,127,255,1)_0%,rgba(152,16,250,1)_100%)] cursor-pointer hover:opacity-90 transition-opacity flex items-center justify-center gap-3"
            >
              <span class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-white text-lg text-center tracking-[0] leading-7 whitespace-nowrap">
                Book a Free Consultation
              </span>
              <div class="w-5 h-5 relative">
                <img class="absolute w-[58.33%] h-0 top-[50.00%] left-[20.83%]" alt="" src="/img/vector-19.svg" />
                <img class="absolute w-[29.17%] h-[58.33%] top-[20.83%] left-[50.00%]" alt="" src="/img/vector-20.svg" />
              </div>
            </a>

            <a
              href="tel:7036909726"
              class="w-full sm:w-auto px-10 py-5 rounded-[10px] border-2 border-solid border-[#2b7fff80] backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)] cursor-pointer hover:bg-[rgba(43,127,255,0.1)] transition-colors flex items-center justify-center gap-3"
            >
              <div class="w-5 h-5 relative">
                <img class="absolute w-[83.33%] h-[83.33%] top-[8.33%] left-[8.33%]" alt="" src="/img/vector-21.svg" />
              </div>
              <span class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-white text-lg text-center tracking-[0] leading-7 whitespace-nowrap">
                Call (703) 690-9726
              </span>
            </a>
          </div>

          <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#697282] text-sm text-center tracking-[0] leading-5">
            Serving {location.city} from our Lorton, VA office ‚Ä¢ Fast response times ‚Ä¢ Local expertise
          </p>
        </div>
      </section>

      <Footer />
    </main>
  </div>
</BaseLayout>

<style is:inline>
  .glow-sphere {
    animation: glowFloat 20s ease-in-out infinite alternate;
    will-change: transform, opacity;
  }

  .glow-sphere--1 {
    animation-duration: 18s;
    animation-delay: -3s;
  }

  .glow-sphere--2 {
    animation-duration: 22s;
    animation-delay: -7s;
    animation-direction: alternate-reverse;
  }

  .glow-sphere--3 {
    animation-duration: 19s;
    animation-delay: -4s;
  }

  .glow-sphere--4 {
    animation-duration: 17s;
    animation-delay: -9s;
  }

  .glow-sphere--5 {
    animation-duration: 23s;
    animation-delay: -13s;
    animation-direction: alternate-reverse;
  }

  .glow-sphere--6 {
    animation-duration: 16s;
    animation-delay: -6s;
  }

  @keyframes glowFloat {
    0% {
      transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
      opacity: 0.92;
    }

    20% {
      transform: translate3d(70px, -55px, 0) scale(1.08) rotate(2deg);
      opacity: 1;
    }

    40% {
      transform: translate3d(-60px, 45px, 0) scale(0.94) rotate(-2deg);
      opacity: 0.85;
    }

    60% {
      transform: translate3d(80px, 55px, 0) scale(1.12) rotate(3deg);
      opacity: 0.98;
    }

    80% {
      transform: translate3d(-75px, -45px, 0) scale(0.96) rotate(-3deg);
      opacity: 0.88;
    }

    100% {
      transform: translate3d(60px, 35px, 0) scale(1.05) rotate(1deg);
      opacity: 0.95;
    }
  }
</style>
