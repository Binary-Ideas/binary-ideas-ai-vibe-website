---
type IconName = "phone" | "tool" | "bolt" | "headset";

interface Step {
  id: number;
  stepNumber: string;
  title: string;
  description: string;
  icon: IconName;
  gradient: string;
}

interface Props {
  titleLeading?: string;
  titleHighlight?: string;
  subtitle?: string;
  steps?: Step[];
}

const defaultSteps: Step[] = [
  {
    id: 1,
    stepNumber: "Step 1",
    title: "Discovery Call",
    description:
      "We begin with a comprehensive consultation to understand your phone system, call volume, and goals so we can design the perfect Voice AI solution for your business.",
    icon: "phone",
    gradient: "bg-[linear-gradient(135deg,rgba(43,127,255,1)_0%,rgba(152,16,250,1)_100%)]"
  },
  {
    id: 2,
    stepNumber: "Step 2",
    title: "Custom Solution Design",
    description:
      "We craft a tailored Voice AI Agent that mirrors your brand voice, handles your specific use cases, and integrates seamlessly with existing systems and workflows.",
    icon: "tool",
    gradient: "bg-[linear-gradient(135deg,rgba(173,70,255,1)_0%,rgba(246,51,154,1)_100%)]"
  },
  {
    id: 3,
    stepNumber: "Step 3",
    title: "Implementation & Integration",
    description:
      "Our team manages the full technical setup — phone routing, CRM connections, testing, and launch — to ensure everything works perfectly from day one.",
    icon: "bolt",
    gradient: "bg-[linear-gradient(135deg,rgba(96,165,250,1)_0%,rgba(167,139,250,1)_100%)]"
  },
  {
    id: 4,
    stepNumber: "Step 4",
    title: "Training & Ongoing Support",
    description:
      "We train your team, monitor performance, and provide continuous optimization and support so your Voice AI Agent keeps delivering results.",
    icon: "headset",
    gradient: "bg-[linear-gradient(135deg,rgba(142,81,255,1)_0%,rgba(59,130,246,1)_100%)]"
  }
];

const {
  titleLeading = "How It Works",
  titleHighlight = "Our Process",
  subtitle = "From consultation to implementation, we guide you every step of the way",
  steps = defaultSteps
} = Astro.props as Props;

const iconMarkup: Record<IconName, string> = {
  phone: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><path d="M22 16.92A16 16 0 0 1 7.08 2L5 4a2 2 0 0 0-.45 2.11l2.2 5.21a2 2 0 0 1-.57 2.22l-1.27 1.27a16 16 0 0 0 7.07 7.07l1.27-1.27a2 2 0 0 1 2.22-.57l5.21 2.2A2 2 0 0 0 20 19z"/></svg>`,
  tool: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><path d="M14.7 6.3a4 4 0 0 0-5.6 5.6L5 16v3h3l4.1-4.1a4 4 0 0 0 5.6-5.6l1.8-1.8a3 3 0 0 0-4.2-4.2z"/><path d="m16 2 6 6"/></svg>`,
  bolt: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><path d="M13 2 3 14h9l-1 8 10-12h-9z"/></svg>`,
  headset: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3z"/><path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/><path d="M18 22v-1a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3v1"/></svg>`
};
---

<section class="relative mx-auto mt-24 max-w-6xl px-6 py-24">
  <header class="flex flex-col items-center gap-3 text-center">
    <h2 class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-3xl font-semibold leading-tight text-white sm:text-4xl md:text-[54px] md:leading-[64px]">
      <span>{titleLeading}</span>
      <span class="mx-2 text-[#ffffff80]">-</span>
      <span class="text-transparent bg-clip-text bg-[linear-gradient(90deg,#60a5fa_0%,#8b5cf6_100%)]">
        {titleHighlight}
      </span>
    </h2>
    <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-base leading-7 tracking-[0] text-[#9aa3b3] sm:text-lg">
      {subtitle}
    </p>
  </header>

  <div class="relative mt-16">
    <div
      class="pointer-events-none absolute inset-x-[4%] top-[96px] hidden h-[2px] bg-[linear-gradient(90deg,rgba(173,70,255,0.7)_0%,rgba(43,127,255,0.7)_100%)] opacity-70 lg:block"
      aria-hidden="true"
    />

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-4">
      {steps.map((step) => (
        <article class="relative flex h-full flex-col rounded-[24px] border border-[#ffffff14] bg-[linear-gradient(185deg,rgba(34,35,52,0.92)_0%,rgba(18,19,30,0.95)_100%)] px-8 pt-10 pb-12 shadow-[0px_28px_60px_rgba(10,10,15,0.45)] backdrop-blur-sm">
          <div class={`flex h-[60px] w-[60px] items-center justify-center rounded-2xl text-white shadow-[0_18px_40px_rgba(96,165,250,0.35)] ${step.gradient}`}>
            <span class="sr-only">{step.title} icon</span>
            <span class="flex items-center justify-center" set:html={iconMarkup[step.icon]} />
          </div>

          <span class="mt-6 [font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-sm font-medium uppercase tracking-[0.08em] text-[#b68cff]">
            {step.stepNumber}
          </span>

          <h3 class="mt-3 [font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-[20px] font-semibold leading-[30px] text-white">
            {step.title}
          </h3>

          <p class="mt-4 [font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-[15px] leading-[26px] text-[#c0c7d6]">
            {step.description}
          </p>
        </article>
      ))}
    </div>
  </div>
</section>

<style is:global>
  /* Styles injected for HowItWorksSection */
</style>
